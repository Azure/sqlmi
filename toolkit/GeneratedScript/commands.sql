
USE [master]
GRANT UNSAFE ASSEMBLY TO [<your_user>]

USE [<your_database>]

EXEC sp_configure 'show advanced options', 1;
RECONFIGURE;

EXEC sp_configure 'clr enabled', 1
RECONFIGURE

EXEC sp_configure 'clr strict security', 0
RECONFIGURE

DECLARE @bytes VARBINARY(8000) = HASHBYTES('SHA2_512', 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C010300690658630000000000000000E00022200B013000001C00000006000000000000CA3A0000002000000040000000000010002000000002000004000000000000000600000000000000008000000002000000000000030060850000100000100000000010000010000000000000100000000000000000000000783A00004F00000000400000A002000000000000000000000000000000000000006000000C000000403900001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E74657874000000D01A000000200000001C000000020000000000000000000000000000200000602E72737263000000A00200000040000000040000001E0000000000000000000000000000400000402E72656C6F6300000C0000000060000000020000002200000000000000000000000000004000004200000000000000000000000000000000AC3A0000000000004800000002000500282700001812000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001B300500D20000000100001100730500000A0A0214FE030B0739B8000000000018171C730600000A0C0802036F0700000A00086F0800000A0D092C1A0006720100007002038C1F000001280900000A6F0A00000A000000DE7C13040011046F0B00000A204D270000FE01130511052C1C0006724F00007002038C1F000001280900000A6F0A00000A00002B210006720001007002038C1F00000111046F0C00000A280D00000A6F0A00000A000000DE2513060006720001007002038C1F00000111066F0C00000A280D00000A6F0A00000A0000DE00000613072B0011072A0000011C0000000013003A4D005708000001000013003AA40025090000011B300400450100000200001100031451730500000A0A00160C7E0E00000A0D02280F00000A13040011046F1000000A13051613062B36110511069A1307000911077250010070281100000A0D082517580C16FE01130811082C0B000311076F1200000A510000110617581306110611058E6932C20672540100700209280900000A6F0A00000A0000DE6F13090011096F0B00000A20F92A0000FE01130A110A2C16000672B401007002281300000A6F0A00000A00002B20000672F40100700211096F0B00000A8C1F000001280900000A6F0A00000A000000DE1F130B0006725802007002110B6F0C00000A280900000A6F0A00000A0000DE00731400000A0B0007026F1500000A130C0672B802007002110C6F1600000A8C23000001280900000A6F0A00000A0000DE1F130D000672FA02007002110D6F0C00000A280900000A6F0A00000A0000DE0006130E2B00110E2A0000000128000000000A00747E00500800000100000A0074CE001F090000010000F3002B1E011F090000011B3002005000000003000011000F00281700000A0F01281800000A28010000060A00066F1900000A0B2B161201281A00000A0C00281B00000A086F1C00000A00001201281D00000A2DE1DE0F1201FE160200001B6F1E00000A00DC2A0110000002001D002340000F000000001B3003005F00000004000011000F00281700000A120028020000060B07060F01281800000A28010000066F1F00000A0000076F1900000A0C2B161202281A00000A0D00281B00000A096F1C00000A00001202281D00000A2DE1DE0F1202FE160200001B6F1E00000A00DC2A000110000002002C00234F000F000000001B300600120300000500001100730500000A0A140B000F00281700000A732000000A0B00DE1126000672460300706F0A00000A0000DE000714282100000A2C12076F2200000A20BB010000FE0116FE012B01160C082C0E0006727C0300706F0A00000A00000714282100000A0D09396D02000000076F2300000A1304061104120528020000066F1F00000A0006110520BB01000028010000066F1F00000A000F02282400000A1306110639300200000072A80300701A8D0500000125160F00281700000AA22517282500000A1309120972E4030070282600000AA22518282700000A130A120A7202040070282800000AA22519038C0F000001A2282900000A13071107282A00000A1308110872060400706F2B00000A001108720E0400706F2C00000A001108166A6F2D00000A0011086F2E00000A724204007072600400706F2F00000A0011086F2E00000A7274040070728E0400706F2F00000A0011086F2E00000A72A4040070282500000A13091209283000000A6F2F00000A000011086F3100000A7417000001130B00110B6F3200000A283300000A2D0E110B6F3200000A283400000A2B05283500000A130C110B6F3600000A110C733700000A130D00110D2D03142B07110D6F3800000A130E0672B80400701A8D0500000125160F00281700000AA22517110B6F3900000A8C2E000001A22518110B6F3A00000AA22519110EA2282900000A6F0A00000A0000DE0D110D2C08110D6F1E00000A00DC00DE0D110B2C08110B6F1E00000A00DC00DDA9000000130F007E0E00000A1310110F6F3B00000A74170000011311111114FE03131211122C620011116F3200000A283300000A2D0E11116F3200000A283400000A2B05283500000A131311116F3600000A1113733700000A13140011142D077E0E00000A2B0711146F3800000A131000DE0D11142C0811146F1E00000A00DC11116F3C00000A000006724D0500700F00281700000A110F6F0C00000A1110280D00000A6F0A00000A0000DE00000000066F1900000A13152B181215281A00000A131600281B00000A11166F1C00000A00001215281D00000A2DDFDE0F1215FE160200001B6F1E00000A00DC2A0000014C000000000900111A00111B0000010200B3015306020D0000000002007F019716020D00000000020080021898020D0000000000007001B92902A91A0000010200DD022502030F000000002202283D00000A002A00000042534A4201000100000000000C00000076342E302E33303331390000000005006C00000014040000237E000080040000C405000023537472696E677300000000440A0000DC050000235553002010000010000000234755494400000030100000E801000023426C6F620000000000000002000001471D02080900000000FA013300160000010000002E00000002000000060000000B0000003D00000001000000060000000500000002000000010000000300000000002B020100000000000600A901BC030600C901BC0306007F018A030F00DC03000006005904520206000F0051000A00840424040A000A0324040600100352020A00F1017C020A00390568040A00100468040A002F057C020E0093015B030E000202EB030E001600EB031B00790300000E005902EB030A00270252020A00CE04680406000C0152020600A00052020A005B0168040600F901FF040600430332000A00D80268040A00F70252020A00210524040A00330124040A002601240406001900520206000E0252020600E5029D030A00000468040A0037047C020E000B055B030E001E015B030600000152020600010051000A00D20468040A00C40268040A00B0027E000A005F0168040600420232000600500332000A00DC006804000000001F000000000001000100010010008B040000150001000100502000000000910030038A0101004C21000000009100640294010300C82200000000960077059F010500342300000000960060059F010700B0230000000096009305A70109001C27000000008618840306000C00000001001A0410100200C904000001006E02020002001A04000001001A0400000200C904000001006E0200000200C90400000100B104000002007302000003009A02090084030100110084030600190084030A007100840306000C0084030600390084032C00390060043600390070003C000101520440000C006C0047000901BF004D004900EB0051000101520455000101BC0580001101450583005900DD04890001014B048F0029000C0251000101520496005100840306005100AF009C0069004004A2007900E70151008100E7014D000C007603B6001400A504C50021011501CA002901AF00D0001400F6043C003101770106000C00F700E40099008403D000990052051C019900C0044D009900ED0451009100E7013C00A90016052401A9000C022901B1009D002E01B1000C022901010152043301410138033A014101B400D00041013E01D000410115024001410104044501510149024B01A9000C02510041016B015101B900730451000101B4055701C100F6015C01C10028006201590137026701C90084036D016901A5005100B900CD007601B9001A035100D1004E0151015901770106002900840306000800090085012E000B00B1012E001300BA012E001B00D90160002300E20180002300E201A0002300E20110005D00A800D500EF002600BF000480000000000000000000000000000000009D0400000400000000000000000000007C014800000000000400000000000000000000007C015202000000000400000000000000000000007C013C0000000000000000000049456E756D657261626C656031004C69737460310053716C496E743332003C4D6F64756C653E006765745F41534349490053797374656D2E494F0053797374656D2E44617461006D73636F726C69620053797374656D2E436F6C6C656374696F6E732E47656E6572696300416464006765745F436F6E6E65637465640053797374656D2E436F6C6C656374696F6E732E5370656369616C697A6564004E6577477569640052656164546F456E640053656E64007365745F4D6574686F64006765745F4572726F72436F6465006765745F537461747573436F64650048747470537461747573436F6465006765745F4D6573736167650041646452616E67650049446973706F7361626C65004461746554696D65006765745F506970650053716C506970650050726F746F636F6C5479706500536F636B657454797065007365745F436F6E74656E7454797065006765745F526573706F6E73650048747470576562526573706F6E736500476574526573706F6E736500446973706F73650044656275676761626C654174747269627574650053716C50726F63656475726541747472696275746500436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650052756E74696D65436F6D7061746962696C697479417474726962757465006765745F56616C75650050696E6700476574456E636F64696E670053716C537472696E6700546F537472696E67007365745F436F6E74656E744C656E6774680055726900546F6F6C6B69742E646C6C00476574526573706F6E736553747265616D007365745F4974656D0053797374656D0053716C426F6F6C65616E00436865636B4671646E006671646E00736173546F6B656E0053797374656D2E4E65742E4E6574776F726B496E666F726D6174696F6E006578656375746557726974654F7065726174696F6E004E616D6556616C7565436F6C6C656374696F6E00576562486561646572436F6C6C656374696F6E00576562457863657074696F6E0045787465726E616C457863657074696F6E00557269466F726D6174457863657074696F6E00536F636B6574457863657074696F6E006765745F5374617475734465736372697074696F6E00436865636B497000437265617465487474700053747265616D5265616465720054657874526561646572004D6963726F736F66742E53716C5365727665722E53657276657200476574456E756D657261746F72002E63746F720053797374656D2E446961676E6F73746963730053797374656D2E52756E74696D652E496E7465726F7053657276696365730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300446562756767696E674D6F6465730053797374656D2E446174612E53716C547970657300446E73006765745F4865616465727300495041646472657373006970416464726573730053797374656D2E4E65742E536F636B657473004950537461747573006765745F53746174757300436F6E63617400466F726D6174004F626A65637400436F6E6E6563740053797374656D2E4E6574006765745F43686172616374657253657400536F636B65740053716C4D616E61676564496E7374616E6365546F6F6C6B6974006765745F43757272656E740073746F726167654163636F756E74006765745F506F727400706F7274004874747057656252657175657374006765745F416464726573734C697374006765745F486F7374004D6F76654E6578740053797374656D2E546578740053716C436F6E74657874006765745F5574634E6F77004164647265737346616D696C790050696E675265706C79004950486F7374456E74727900476574486F7374456E747279006F705F496E657175616C69747900436865636B4671646E4163636573736962696C69747900436865636B4970416464726573734163636573736962696C69747900436865636B53746F726167654163636F756E744163636573736962696C6974790049734E756C6C4F72456D707479000000004D540043005000200063006F006E006E00650063007400200074006F0020007B0030007D003A007B0031007D00200077006100730020007300750063006300650073007300660075006C002E000080AF540043005000200063006F006E006E00650063007400200074006F0020007B0030007D003A007B0031007D0020006600610069006C0065006400200062006500630061007500730065002000740068006500720065002000770065007200650020006E006F0020006C0069007300740065006E00650072002E00200048006F00770065007600650072002000740068006500200070006F007200740020006900730020006F00700065006E002E00004F540043005000200063006F006E006E00650063007400200074006F0020007B0030007D003A007B0031007D0020006600610069006C00650064002000770069007400680020007B0032007D002E0000033B00005F48006F00730074006E0061006D00650020007B0030007D00200077006100730020007300750063006300650073007300660075006C006C00790020007200650073006F006C00760065006400200074006F003A0020007B0031007D002E00003F48006F00730074006E0061006D00650020007B0030007D00200063006F0075006C00640020006E006F007400200062006500200066006F0075006E006400006344004E00530020007200650073006F006C007500740069006F006E0020006F00660020007B0030007D0020007400680072006F0077006E00200066006F006C006C006F00770069006E00670020006500720072006F00720020007B0031007D002E00005F44004E00530020007200650073006F006C007500740069006F006E0020006F00660020007B0030007D0020007400680072006F0077006E00200066006F006C006C006F00770069006E006700200065007800630020007B0031007D002E000041500049004E004700200074006F0020007B0030007D0020007200650070006F007200740065006400200073007400610074007500730020007B0031007D002E00004B500049004E004700200074006F0020007B0030007D0020007400680072006F0077006E00200066006F006C006C006F00770069006E006700200065007800630020007B0031007D002E000035550052004900200069007300200069006E0020007400680065002000770072006F006E006700200066006F0072006D0061007400002B4F006E006C007900200068007400740070007300200069007300200061006C006C006F00770065006400003B7B0030007D002F0063006800650063006B00740065007300740062006C006F0062005F007B0031007D005F007B0032007D003F007B0033007D00001D79007900790079004D004D0064005F00480048006D006D007300730000034E000007500055005400003374006500780074002F0070006C00610069006E003B00200063006800610072007300650074003D005500540046002D003800011D78002D006D0073002D0062006C006F0062002D007400790070006500011342006C006F0063006B0042006C006F006200001978002D006D0073002D00760065007200730069006F006E00011532003000320030002D00300034002D0030003800011378002D006D0073002D00640061007400650001809350007500740020007200650071007500650073007400200074006F0020006100630063006F0075006E00740020007B0030007D002000720065007400750072006E006500640020007B0031007D002E0020004400650073006300720069007000740069006F006E003A0020007B0032007D003B00200052006500730070006F006E00730065003A0020007B0033007D003B0000808D50007500740020007200650071007500650073007400200074006F0020006100630063006F0075006E00740020007B0030007D0020007400680072006F007700200061006E00200065007800630065007000740069006F006E0020007B0031007D002E0020004800740074007000200072006500730070006F006E00730065003A0020007B0032007D002E0000C49A158F549C6D439628A5E2703301A900042001010803200001052001011111150708151219010E02121D021221021225151219010E05151219010E09200301117111751179052002010E08032000020600030E0E1C1C052001011300032000080320000E0700040E0E1C1C1C22070F151219010E1229080E122D1D123108123102122102122512351225151219010E02060E050001122D0E0520001D12310600030E1C1C1C0500020E0E1C05200112350E05200011808D0D0703151219010E151145010E0E08200015114501130005151145010E0420001300050000128095042001010E0E07040E151219010E151145010E0E0A2001011512809D0113002C0717151219010E124D02020E0E020E125111551159125D126112650E12690E125D0212611265151145010E0E07000202124D124D04000011550420010E0E04000011590600020E0E1D1C05000112510E042001010A0520001280A5052002010E0E0520001280AD040001020E05000112610E04000012610520001280B1082002011280B112610520001180B908B77A5C561934E08904BB010000090002151219010E0E080A0002151219010E0E100E07000201113D114109000301113D113D11490801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F777301080100070100000000040100000000000000006906586300000000020000001C0100005C3900005C1B000052534453CDC292AB93F08E4F81EC28279AF2BF4401000000433A5C55736572735C64656A616E64755C736F757263655C7265706F735C73716C6D695C746F6F6C6B69745C546F6F6C6B69745C6F626A5C44656275675C546F6F6C6B69742E70646200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000A03A00000000000000000000BA3A0000002000000000000000000000000000000000000000000000AC3A0000000000000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF25002000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100100000001800008000000000000000000000000000000100010000003000008000000000000000000000000000000100000000004800000058400000440200000000000000000000440234000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000000000000000000000000000000003F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B004A4010000010053007400720069006E006700460069006C00650049006E0066006F0000008001000001003000300030003000300034006200300000002C0002000100460069006C0065004400650073006300720069007000740069006F006E000000000020000000300008000100460069006C006500560065007200730069006F006E000000000030002E0030002E0030002E003000000038000C00010049006E007400650072006E0061006C004E0061006D006500000054006F006F006C006B00690074002E0064006C006C0000002800020001004C006500670061006C0043006F00700079007200690067006800740000002000000040000C0001004F0072006900670069006E0061006C00460069006C0065006E0061006D006500000054006F006F006C006B00690074002E0064006C006C000000340008000100500072006F006400750063007400560065007200730069006F006E00000030002E0030002E0030002E003000000038000800010041007300730065006D0062006C0079002000560065007200730069006F006E00000030002E0030002E0030002E00300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000C000000CC3A00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000);
EXEC sp_add_trusted_assembly @bytes,
N'SqlManagedInstanceToolkit, version=0.0.0.0, culture=neutral, publickeytoken=null, processorarchitecture=msil';

--DROP ASSEMBLY [SqlManagedInstanceToolkit]
CREATE ASSEMBLY [SqlManagedInstanceToolkit]
FROM 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C010300690658630000000000000000E00022200B013000001C00000006000000000000CA3A0000002000000040000000000010002000000002000004000000000000000600000000000000008000000002000000000000030060850000100000100000000010000010000000000000100000000000000000000000783A00004F00000000400000A002000000000000000000000000000000000000006000000C000000403900001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E74657874000000D01A000000200000001C000000020000000000000000000000000000200000602E72737263000000A00200000040000000040000001E0000000000000000000000000000400000402E72656C6F6300000C0000000060000000020000002200000000000000000000000000004000004200000000000000000000000000000000AC3A0000000000004800000002000500282700001812000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001B300500D20000000100001100730500000A0A0214FE030B0739B8000000000018171C730600000A0C0802036F0700000A00086F0800000A0D092C1A0006720100007002038C1F000001280900000A6F0A00000A000000DE7C13040011046F0B00000A204D270000FE01130511052C1C0006724F00007002038C1F000001280900000A6F0A00000A00002B210006720001007002038C1F00000111046F0C00000A280D00000A6F0A00000A000000DE2513060006720001007002038C1F00000111066F0C00000A280D00000A6F0A00000A0000DE00000613072B0011072A0000011C0000000013003A4D005708000001000013003AA40025090000011B300400450100000200001100031451730500000A0A00160C7E0E00000A0D02280F00000A13040011046F1000000A13051613062B36110511069A1307000911077250010070281100000A0D082517580C16FE01130811082C0B000311076F1200000A510000110617581306110611058E6932C20672540100700209280900000A6F0A00000A0000DE6F13090011096F0B00000A20F92A0000FE01130A110A2C16000672B401007002281300000A6F0A00000A00002B20000672F40100700211096F0B00000A8C1F000001280900000A6F0A00000A000000DE1F130B0006725802007002110B6F0C00000A280900000A6F0A00000A0000DE00731400000A0B0007026F1500000A130C0672B802007002110C6F1600000A8C23000001280900000A6F0A00000A0000DE1F130D000672FA02007002110D6F0C00000A280900000A6F0A00000A0000DE0006130E2B00110E2A0000000128000000000A00747E00500800000100000A0074CE001F090000010000F3002B1E011F090000011B3002005000000003000011000F00281700000A0F01281800000A28010000060A00066F1900000A0B2B161201281A00000A0C00281B00000A086F1C00000A00001201281D00000A2DE1DE0F1201FE160200001B6F1E00000A00DC2A0110000002001D002340000F000000001B3003005F00000004000011000F00281700000A120028020000060B07060F01281800000A28010000066F1F00000A0000076F1900000A0C2B161202281A00000A0D00281B00000A096F1C00000A00001202281D00000A2DE1DE0F1202FE160200001B6F1E00000A00DC2A000110000002002C00234F000F000000001B300600120300000500001100730500000A0A140B000F00281700000A732000000A0B00DE1126000672460300706F0A00000A0000DE000714282100000A2C12076F2200000A20BB010000FE0116FE012B01160C082C0E0006727C0300706F0A00000A00000714282100000A0D09396D02000000076F2300000A1304061104120528020000066F1F00000A0006110520BB01000028010000066F1F00000A000F02282400000A1306110639300200000072A80300701A8D0500000125160F00281700000AA22517282500000A1309120972E4030070282600000AA22518282700000A130A120A7202040070282800000AA22519038C0F000001A2282900000A13071107282A00000A1308110872060400706F2B00000A001108720E0400706F2C00000A001108166A6F2D00000A0011086F2E00000A724204007072600400706F2F00000A0011086F2E00000A7274040070728E0400706F2F00000A0011086F2E00000A72A4040070282500000A13091209283000000A6F2F00000A000011086F3100000A7417000001130B00110B6F3200000A283300000A2D0E110B6F3200000A283400000A2B05283500000A130C110B6F3600000A110C733700000A130D00110D2D03142B07110D6F3800000A130E0672B80400701A8D0500000125160F00281700000AA22517110B6F3900000A8C2E000001A22518110B6F3A00000AA22519110EA2282900000A6F0A00000A0000DE0D110D2C08110D6F1E00000A00DC00DE0D110B2C08110B6F1E00000A00DC00DDA9000000130F007E0E00000A1310110F6F3B00000A74170000011311111114FE03131211122C620011116F3200000A283300000A2D0E11116F3200000A283400000A2B05283500000A131311116F3600000A1113733700000A13140011142D077E0E00000A2B0711146F3800000A131000DE0D11142C0811146F1E00000A00DC11116F3C00000A000006724D0500700F00281700000A110F6F0C00000A1110280D00000A6F0A00000A0000DE00000000066F1900000A13152B181215281A00000A131600281B00000A11166F1C00000A00001215281D00000A2DDFDE0F1215FE160200001B6F1E00000A00DC2A0000014C000000000900111A00111B0000010200B3015306020D0000000002007F019716020D00000000020080021898020D0000000000007001B92902A91A0000010200DD022502030F000000002202283D00000A002A00000042534A4201000100000000000C00000076342E302E33303331390000000005006C00000014040000237E000080040000C405000023537472696E677300000000440A0000DC050000235553002010000010000000234755494400000030100000E801000023426C6F620000000000000002000001471D02080900000000FA013300160000010000002E00000002000000060000000B0000003D00000001000000060000000500000002000000010000000300000000002B020100000000000600A901BC030600C901BC0306007F018A030F00DC03000006005904520206000F0051000A00840424040A000A0324040600100352020A00F1017C020A00390568040A00100468040A002F057C020E0093015B030E000202EB030E001600EB031B00790300000E005902EB030A00270252020A00CE04680406000C0152020600A00052020A005B0168040600F901FF040600430332000A00D80268040A00F70252020A00210524040A00330124040A002601240406001900520206000E0252020600E5029D030A00000468040A0037047C020E000B055B030E001E015B030600000152020600010051000A00D20468040A00C40268040A00B0027E000A005F0168040600420232000600500332000A00DC006804000000001F000000000001000100010010008B040000150001000100502000000000910030038A0101004C21000000009100640294010300C82200000000960077059F010500342300000000960060059F010700B0230000000096009305A70109001C27000000008618840306000C00000001001A0410100200C904000001006E02020002001A04000001001A0400000200C904000001006E0200000200C90400000100B104000002007302000003009A02090084030100110084030600190084030A007100840306000C0084030600390084032C00390060043600390070003C000101520440000C006C0047000901BF004D004900EB0051000101520455000101BC0580001101450583005900DD04890001014B048F0029000C0251000101520496005100840306005100AF009C0069004004A2007900E70151008100E7014D000C007603B6001400A504C50021011501CA002901AF00D0001400F6043C003101770106000C00F700E40099008403D000990052051C019900C0044D009900ED0451009100E7013C00A90016052401A9000C022901B1009D002E01B1000C022901010152043301410138033A014101B400D00041013E01D000410115024001410104044501510149024B01A9000C02510041016B015101B900730451000101B4055701C100F6015C01C10028006201590137026701C90084036D016901A5005100B900CD007601B9001A035100D1004E0151015901770106002900840306000800090085012E000B00B1012E001300BA012E001B00D90160002300E20180002300E201A0002300E20110005D00A800D500EF002600BF000480000000000000000000000000000000009D0400000400000000000000000000007C014800000000000400000000000000000000007C015202000000000400000000000000000000007C013C0000000000000000000049456E756D657261626C656031004C69737460310053716C496E743332003C4D6F64756C653E006765745F41534349490053797374656D2E494F0053797374656D2E44617461006D73636F726C69620053797374656D2E436F6C6C656374696F6E732E47656E6572696300416464006765745F436F6E6E65637465640053797374656D2E436F6C6C656374696F6E732E5370656369616C697A6564004E6577477569640052656164546F456E640053656E64007365745F4D6574686F64006765745F4572726F72436F6465006765745F537461747573436F64650048747470537461747573436F6465006765745F4D6573736167650041646452616E67650049446973706F7361626C65004461746554696D65006765745F506970650053716C506970650050726F746F636F6C5479706500536F636B657454797065007365745F436F6E74656E7454797065006765745F526573706F6E73650048747470576562526573706F6E736500476574526573706F6E736500446973706F73650044656275676761626C654174747269627574650053716C50726F63656475726541747472696275746500436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650052756E74696D65436F6D7061746962696C697479417474726962757465006765745F56616C75650050696E6700476574456E636F64696E670053716C537472696E6700546F537472696E67007365745F436F6E74656E744C656E6774680055726900546F6F6C6B69742E646C6C00476574526573706F6E736553747265616D007365745F4974656D0053797374656D0053716C426F6F6C65616E00436865636B4671646E006671646E00736173546F6B656E0053797374656D2E4E65742E4E6574776F726B496E666F726D6174696F6E006578656375746557726974654F7065726174696F6E004E616D6556616C7565436F6C6C656374696F6E00576562486561646572436F6C6C656374696F6E00576562457863657074696F6E0045787465726E616C457863657074696F6E00557269466F726D6174457863657074696F6E00536F636B6574457863657074696F6E006765745F5374617475734465736372697074696F6E00436865636B497000437265617465487474700053747265616D5265616465720054657874526561646572004D6963726F736F66742E53716C5365727665722E53657276657200476574456E756D657261746F72002E63746F720053797374656D2E446961676E6F73746963730053797374656D2E52756E74696D652E496E7465726F7053657276696365730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300446562756767696E674D6F6465730053797374656D2E446174612E53716C547970657300446E73006765745F4865616465727300495041646472657373006970416464726573730053797374656D2E4E65742E536F636B657473004950537461747573006765745F53746174757300436F6E63617400466F726D6174004F626A65637400436F6E6E6563740053797374656D2E4E6574006765745F43686172616374657253657400536F636B65740053716C4D616E61676564496E7374616E6365546F6F6C6B6974006765745F43757272656E740073746F726167654163636F756E74006765745F506F727400706F7274004874747057656252657175657374006765745F416464726573734C697374006765745F486F7374004D6F76654E6578740053797374656D2E546578740053716C436F6E74657874006765745F5574634E6F77004164647265737346616D696C790050696E675265706C79004950486F7374456E74727900476574486F7374456E747279006F705F496E657175616C69747900436865636B4671646E4163636573736962696C69747900436865636B4970416464726573734163636573736962696C69747900436865636B53746F726167654163636F756E744163636573736962696C6974790049734E756C6C4F72456D707479000000004D540043005000200063006F006E006E00650063007400200074006F0020007B0030007D003A007B0031007D00200077006100730020007300750063006300650073007300660075006C002E000080AF540043005000200063006F006E006E00650063007400200074006F0020007B0030007D003A007B0031007D0020006600610069006C0065006400200062006500630061007500730065002000740068006500720065002000770065007200650020006E006F0020006C0069007300740065006E00650072002E00200048006F00770065007600650072002000740068006500200070006F007200740020006900730020006F00700065006E002E00004F540043005000200063006F006E006E00650063007400200074006F0020007B0030007D003A007B0031007D0020006600610069006C00650064002000770069007400680020007B0032007D002E0000033B00005F48006F00730074006E0061006D00650020007B0030007D00200077006100730020007300750063006300650073007300660075006C006C00790020007200650073006F006C00760065006400200074006F003A0020007B0031007D002E00003F48006F00730074006E0061006D00650020007B0030007D00200063006F0075006C00640020006E006F007400200062006500200066006F0075006E006400006344004E00530020007200650073006F006C007500740069006F006E0020006F00660020007B0030007D0020007400680072006F0077006E00200066006F006C006C006F00770069006E00670020006500720072006F00720020007B0031007D002E00005F44004E00530020007200650073006F006C007500740069006F006E0020006F00660020007B0030007D0020007400680072006F0077006E00200066006F006C006C006F00770069006E006700200065007800630020007B0031007D002E000041500049004E004700200074006F0020007B0030007D0020007200650070006F007200740065006400200073007400610074007500730020007B0031007D002E00004B500049004E004700200074006F0020007B0030007D0020007400680072006F0077006E00200066006F006C006C006F00770069006E006700200065007800630020007B0031007D002E000035550052004900200069007300200069006E0020007400680065002000770072006F006E006700200066006F0072006D0061007400002B4F006E006C007900200068007400740070007300200069007300200061006C006C006F00770065006400003B7B0030007D002F0063006800650063006B00740065007300740062006C006F0062005F007B0031007D005F007B0032007D003F007B0033007D00001D79007900790079004D004D0064005F00480048006D006D007300730000034E000007500055005400003374006500780074002F0070006C00610069006E003B00200063006800610072007300650074003D005500540046002D003800011D78002D006D0073002D0062006C006F0062002D007400790070006500011342006C006F0063006B0042006C006F006200001978002D006D0073002D00760065007200730069006F006E00011532003000320030002D00300034002D0030003800011378002D006D0073002D00640061007400650001809350007500740020007200650071007500650073007400200074006F0020006100630063006F0075006E00740020007B0030007D002000720065007400750072006E006500640020007B0031007D002E0020004400650073006300720069007000740069006F006E003A0020007B0032007D003B00200052006500730070006F006E00730065003A0020007B0033007D003B0000808D50007500740020007200650071007500650073007400200074006F0020006100630063006F0075006E00740020007B0030007D0020007400680072006F007700200061006E00200065007800630065007000740069006F006E0020007B0031007D002E0020004800740074007000200072006500730070006F006E00730065003A0020007B0032007D002E0000C49A158F549C6D439628A5E2703301A900042001010803200001052001011111150708151219010E02121D021221021225151219010E05151219010E09200301117111751179052002010E08032000020600030E0E1C1C052001011300032000080320000E0700040E0E1C1C1C22070F151219010E1229080E122D1D123108123102122102122512351225151219010E02060E050001122D0E0520001D12310600030E1C1C1C0500020E0E1C05200112350E05200011808D0D0703151219010E151145010E0E08200015114501130005151145010E0420001300050000128095042001010E0E07040E151219010E151145010E0E0A2001011512809D0113002C0717151219010E124D02020E0E020E125111551159125D126112650E12690E125D0212611265151145010E0E07000202124D124D04000011550420010E0E04000011590600020E0E1D1C05000112510E042001010A0520001280A5052002010E0E0520001280AD040001020E05000112610E04000012610520001280B1082002011280B112610520001180B908B77A5C561934E08904BB010000090002151219010E0E080A0002151219010E0E100E07000201113D114109000301113D113D11490801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F777301080100070100000000040100000000000000006906586300000000020000001C0100005C3900005C1B000052534453CDC292AB93F08E4F81EC28279AF2BF4401000000433A5C55736572735C64656A616E64755C736F757263655C7265706F735C73716C6D695C746F6F6C6B69745C546F6F6C6B69745C6F626A5C44656275675C546F6F6C6B69742E70646200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000A03A00000000000000000000BA3A0000002000000000000000000000000000000000000000000000AC3A0000000000000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF25002000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100100000001800008000000000000000000000000000000100010000003000008000000000000000000000000000000100000000004800000058400000440200000000000000000000440234000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000000000000000000000000000000003F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B004A4010000010053007400720069006E006700460069006C00650049006E0066006F0000008001000001003000300030003000300034006200300000002C0002000100460069006C0065004400650073006300720069007000740069006F006E000000000020000000300008000100460069006C006500560065007200730069006F006E000000000030002E0030002E0030002E003000000038000C00010049006E007400650072006E0061006C004E0061006D006500000054006F006F006C006B00690074002E0064006C006C0000002800020001004C006500670061006C0043006F00700079007200690067006800740000002000000040000C0001004F0072006900670069006E0061006C00460069006C0065006E0061006D006500000054006F006F006C006B00690074002E0064006C006C000000340008000100500072006F006400750063007400560065007200730069006F006E00000030002E0030002E0030002E003000000038000800010041007300730065006D0062006C0079002000560065007200730069006F006E00000030002E0030002E0030002E00300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000C000000CC3A00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 WITH PERMISSION_SET = EXTERNAL_ACCESS;

--DROP PROCEDURE dbo.SqlManagedInstanceToolkit_CheckIpAddressAccessibility
CREATE PROCEDURE dbo.SqlManagedInstanceToolkit_CheckIpAddressAccessibility (@ipAddress AS NVARCHAR(MAX), @port AS INT) AS EXTERNAL NAME [SqlManagedInstanceToolkit].[SqlManagedInstanceToolkit].[CheckIpAddressAccessibility];

DECLARE @ipAddress NVARCHAR(MAX) = '<ip address>'
DECLARE @port INT = <port>
EXEC dbo.SqlManagedInstanceToolkit_CheckStorageAccountAccessibility @ipAddress, @port

--DROP PROCEDURE dbo.SqlManagedInstanceToolkit_CheckFqdnAccessibility
CREATE PROCEDURE dbo.SqlManagedInstanceToolkit_CheckFqdnAccessibility (@fqdn AS NVARCHAR(MAX), @port AS INT) AS EXTERNAL NAME [SqlManagedInstanceToolkit].[SqlManagedInstanceToolkit].[CheckFqdnAccessibility];

DECLARE @fqdn NVARCHAR(MAX) = '<fqdn>'
DECLARE @port INT = <port>
EXEC dbo.SqlManagedInstanceToolkit_CheckFqdnAccessibility @fqdn, @port

--DROP PROCEDURE dbo.SqlManagedInstanceToolkit_CheckStorageAccountAccessibility
CREATE PROCEDURE dbo.SqlManagedInstanceToolkit_CheckStorageAccountAccessibility (@strg AS NVARCHAR(MAX), @sas AS NVARCHAR(MAX), @write BIT) AS EXTERNAL NAME [SqlManagedInstanceToolkit].[SqlManagedInstanceToolkit].[CheckStorageAccountAccessibility];

DECLARE @strgToTest NVARCHAR(MAX) = '<your strg>'
DECLARE @sasToTest NVARCHAR(MAX) = '<your sas>'
DECLARE @writeToNewFile BIT = 1
EXEC dbo.SqlManagedInstanceToolkit_CheckStorageAccountAccessibility @strgToTest, @sasToTest, @writeToNewFile
